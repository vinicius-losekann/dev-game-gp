<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogo de Ger√™ncia de Projetos</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #e8f0f2;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            color: #333;
        }
        .container {
            background-color: #fff;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
            max-width: 600px;
            width: 100%;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .header {
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }
        .header img {
            width: 100%;
            height: auto;
            margin-bottom: 20px;
            display: block;
        }
        .header h1 {
            font-family: 'Poppins', sans-serif;
            color: #2e7d32;
            font-size: 2.5em;
            margin: 0;
        }
        .header .game-objective {
            margin-top: 10px;
            line-height: 1.6;
        }
        .header .instructions-list {
            text-align: left;
            margin-top: 10px;
            line-height: 1.6;
            padding-left: 20px;
            list-style-type: decimal;
        }
        .header .instructions-list li {
            margin-bottom: 8px;
        }
        .language-selection {
            margin: 20px 0;
        }
        .language-selection button {
            font-family: 'Roboto', sans-serif;
            background-color: #f5f5f5;
            border: 1px solid #ddd;
            padding: 10px 20px;
            margin: 0 5px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .language-selection button:hover,
        .language-selection button.selected {
            background-color: #e0e0e0;
        }
        .cards {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-top: 30px;
        }
        .card {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            width: 100%;
            box-sizing: border-box;
            text-align: left;
            position: relative; /* Importante para o z-index e posicionamento do modal */
        }
        .card h2 {
            font-family: 'Poppins', sans-serif;
            margin-top: 0;
            color: #555;
            font-size: 1.5em;
        }
        .card form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .card input[type="text"] {
            font-family: 'Roboto', sans-serif;
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-sizing: border-box;
        }
        .card button {
            font-family: 'Roboto', sans-serif;
            background-color: #43a047;
            color: #fff;
            padding: 12px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.3s;
        }
        .card button:hover {
            background-color: #388e3c;
        }
        .footer {
            margin-top: 40px;
            color: #999;
            font-size: 0.9em;
        }
        #error-message {
            color: red;
            margin-top: 10px;
            font-size: 0.9em;
            text-align: center;
        }
        /* Estilos do Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            visibility: hidden;
            opacity: 0;
            transition: visibility 0s, opacity 0.3s;
        }
        .modal-overlay.active {
            visibility: visible;
            opacity: 1;
        }
        .modal-content {
            background-color: #f0fff0; /* Verde clarinho */
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 400px;
            width: 90%;
            position: relative;
        }
        .modal-content h3 {
            font-family: 'Poppins', sans-serif;
            color: #2e7d32;
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.8em;
        }
        .modal-content p {
            font-size: 1.1em;
            margin-bottom: 25px;
            line-height: 1.5;
            color: #555;
        }
        .modal-content button {
            background-color: #43a047;
            color: #fff;
            padding: 10px 25px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.3s;
        }
        .modal-content button:hover {
            background-color: #388e3c;
        }
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="header">
            <img src="https://github.com/vinicius-losekann/dev-game-gp/blob/refatorado/data/imgs/logo-jogo.png?raw=true" alt="Logo do Jogo de Ger√™ncia de Projetos">
            <h1 id="main-title">Jogo de Ger√™ncia de Projetos</h1>
            
            <p id="game-objective" class="game-objective">
                Este jogo foi criado para ajudar voc√™ a aprender, revisar e aplicar conceitos fundamentais de gerenciamento de projetos de forma interativa e divertida. Teste suas habilidades e conhecimentos em diversas √°reas para se tornar um gerente de projetos de sucesso.
            </p>

            <p class="instructions-heading">
                <b id="instructions-title">Instru√ß√µes:</b>
            </p>

            <ol class="instructions-list" id="instructions-list">
                <li>Escolha seu idioma.</li>
                <li>Inicie uma nova sess√£o ou junte-se a uma j√° existente.</li>
                <li>Teste suas habilidades em diversas √°reas de conhecimento.</li>
            </ol>
        </div>

        <div class="language-selection" id="language-selection">
        </div>

        <div class="cards">
            <div class="card">
                <h2 id="new-game-title">Iniciar um Novo Jogo</h2>
                <form id="new-game-form">
                    <button type="button" id="new-game-button">Criar Nova Sess√£o</button>
                </form>
                
                <div id="session-modal" class="modal-overlay">
                    <div class="modal-content">
                        <h3>Sess√£o Criada! üéâ</h3>
                        <p>Compartilhe o c√≥digo da sess√£o com seus amigos:</p>
                        <h2 id="modal-session-code"></h2>
                        <button id="modal-close-button">OK</button>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <h2 id="join-session-title">Entrar em uma Sess√£o Existente</h2>
                <form id="join-session-form">
                    <input type="text" id="username-join" placeholder="Seu nome de usu√°rio" required>
                    <input type="text" id="session-code" placeholder="C√≥digo da sess√£o" required>
                    <button type="submit" id="join-session-button">Entrar na Sess√£o</button>
                </form>
            </div>
        </div>
        
        <p id="error-message"></p>

        <div class="footer">
            <p><span id="game-version-text">Vers√£o do Jogo:</span> <span id="game-version">1.0.0</span></p>
        </div>
    </div>

    <script>
        const config = {
            languages: [
                { code: 'pt-BR', name: 'Portugu√™s (BR)' },
                { code: 'en-US', name: 'Ingl√™s (US)' },
                { code: 'es-ES', name: 'Espanhol (ES)' }
            ]
        };

        const translations = {
            'pt-BR': {
                title: 'Jogo de Ger√™ncia de Projetos',
                objective: 'Este jogo foi criado para ajudar voc√™ a aprender, revisar e aplicar conceitos fundamentais de gerenciamento de projetos de forma interativa e divertida. Teste suas habilidades e conhecimentos em diversas √°reas para se tornar um gerente de projetos de sucesso.',
                instructionsTitle: 'Instru√ß√µes:',
                instructions: [
                    'Escolha seu idioma.',
                    'Inicie uma nova sess√£o ou junte-se a uma j√° existente.',
                    'Teste suas habilidades em diversas √°reas de conhecimento.'
                ],
                newGameTitle: 'Iniciar um Novo Jogo',
                newGameButton: 'Criar Nova Sess√£o',
                joinSessionTitle: 'Entrar em uma Sess√£o Existente',
                usernamePlaceholder: 'Seu nome de usu√°rio',
                sessionCodePlaceholder: 'C√≥digo da sess√£o',
                joinSessionButton: 'Entrar na Sess√£o',
                versionText: 'Vers√£o do Jogo: '
            },
            'en-US': {
                title: 'Project Management Game',
                objective: 'This game was created to help you learn, review, and apply fundamental project management concepts in an interactive and fun way. Test your skills and knowledge in various areas to become a successful project manager.',
                instructionsTitle: 'Instructions:',
                instructions: [
                    'Choose your language.',
                    'Start a new session or join an existing one.',
                    'Test your skills in various knowledge areas.'
                ],
                newGameTitle: 'Start a New Game',
                newGameButton: 'Create New Session',
                joinSessionTitle: 'Join an Existing Session',
                usernamePlaceholder: 'Your username',
                sessionCodePlaceholder: 'Session code',
                joinSessionButton: 'Join Session',
                versionText: 'Game Version: '
            },
            'es-ES': {
                title: 'Juego de Gesti√≥n de Proyectos',
                objective: 'Este juego fue creado para ayudarte a aprender, revisar y aplicar conceptos fundamentales de gesti√≥n de proyectos de forma interactiva y divertida. Pon a prueba tus habilidades y conocimientos en diversas √°reas para convertirte en un gestor de proyectos exitoso.',
                instructionsTitle: 'Instrucciones:',
                instructions: [
                    'Elige tu idioma.',
                    'Inicia una nueva sesi√≥n o √∫nete a una ya existente.',
                    'Pon a prueba tus habilidades en diversas √°reas de conocimiento.'
                ],
                newGameTitle: 'Crear un Nuevo Juego',
                newGameButton: 'Crear nueva sesi√≥n',
                joinSessionTitle: '√önete a una sesi√≥n existente',
                usernamePlaceholder: 'Tu nombre de usuario',
                sessionCodePlaceholder: 'C√≥digo de la sesi√≥n',
                joinSessionButton: 'Unirse a la sesi√≥n',
                versionText: 'Versi√≥n del juego: '
            }
        };

        function updateContent(langCode) {
            const lang = translations[langCode] || translations['pt-BR'];

            const elements = {
                title: document.getElementById('main-title'),
                objective: document.getElementById('game-objective'),
                instructionsTitle: document.getElementById('instructions-title'),
                instructionsList: document.getElementById('instructions-list'),
                newGameTitle: document.getElementById('new-game-title'),
                newGameButton: document.getElementById('new-game-button'),
                joinSessionTitle: document.getElementById('join-session-title'),
                usernameJoin: document.getElementById('username-join'),
                sessionCode: document.getElementById('session-code'),
                joinSessionButton: document.querySelector('#join-session-form button'),
                gameVersionText: document.getElementById('game-version-text')
            };

            document.title = lang.title;

            if (elements.title) elements.title.textContent = lang.title;
            if (elements.objective) elements.objective.textContent = lang.objective;
            if (elements.instructionsTitle) elements.instructionsTitle.textContent = lang.instructionsTitle;

            if (elements.instructionsList) {
                elements.instructionsList.innerHTML = '';
                lang.instructions.forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = item;
                    elements.instructionsList.appendChild(li);
                });
            }

            if (elements.newGameTitle) elements.newGameTitle.textContent = lang.newGameTitle;
            if (elements.newGameButton) elements.newGameButton.textContent = lang.newGameButton;
            if (elements.joinSessionTitle) elements.joinSessionTitle.textContent = lang.joinSessionTitle;
            if (elements.usernameJoin) elements.usernameJoin.placeholder = lang.usernamePlaceholder;
            if (elements.sessionCode) elements.sessionCode.placeholder = lang.sessionCodePlaceholder;
            if (elements.joinSessionButton) elements.joinSessionButton.textContent = lang.joinSessionButton;
            if (elements.gameVersionText) elements.gameVersionText.textContent = lang.versionText;

            document.querySelectorAll('.language-selection button').forEach(button => {
                button.classList.remove('selected');
            });
            const selectedButton = document.querySelector(`button[data-lang="${langCode}"]`);
            if (selectedButton) {
                selectedButton.classList.add('selected');
            }
        }

        const langContainer = document.getElementById('language-selection');
        config.languages.forEach(lang => {
            const button = document.createElement('button');
            button.textContent = lang.name;
            button.setAttribute('data-lang', lang.code);
            button.onclick = () => updateContent(lang.code);
            langContainer.appendChild(button);
        });

        // Elementos do Modal
        const sessionModal = document.getElementById('session-modal');
        const modalSessionCode = document.getElementById('modal-session-code');
        const modalCloseButton = document.getElementById('modal-close-button');

        // Fun√ß√µes da l√≥gica de jogo
        function generateRandomId(length) {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let result = '';
            for (let i = 0; i < length; i++) {
                result += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return result;
        }

        function showMessage(message) {
            const errorMessage = document.getElementById('error-message');
            errorMessage.textContent = message;
        }

        document.getElementById('new-game-button').addEventListener('click', () => {
            const newSessionCode = generateRandomId(4);
            modalSessionCode.textContent = newSessionCode;
            sessionModal.classList.add('active');
        });

        modalCloseButton.addEventListener('click', () => {
            sessionModal.classList.remove('active');
            document.getElementById('session-code').value = modalSessionCode.textContent;
        });

        document.getElementById('join-session-form').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const username = document.getElementById('username-join').value.trim();
            const sessionCode = document.getElementById('session-code').value.trim();
            const langCode = document.querySelector('.language-selection button.selected').getAttribute('data-lang') || 'pt-BR';
            
            if (!username) {
                showMessage('Por favor, digite seu nome de usu√°rio.');
                return;
            }
            
            if (!sessionCode) {
                showMessage('Por favor, digite o c√≥digo da sess√£o.');
                return;
            }
            
            // Redireciona para game.html com os par√¢metros na URL
            window.location.href = `game.html?session=${encodeURIComponent(sessionCode)}&username=${encodeURIComponent(username)}&lang=${encodeURIComponent(langCode)}`;
        });
        
        updateContent('pt-BR');
    </script>
</body>
</html>
